"use strict";(self.webpackChunktogy_web=self.webpackChunktogy_web||[]).push([[277],{277:(n,e,t)=>{t.r(e),t.d(e,{default:()=>Dn});var o,i,a,r,d,s,l,c,x,p,g,h,u,b,f,y,m,A,v,w,k,j,F,D,C,z,E,B,S,M,N,Y,_,G,P,J=t(9379),H=t(7528),K=t(9950),R=t(8429),Z=t(4752),q=t(5299),I=t(6220),L=t(4414);const O=(0,Z.i7)(o||(o=(0,H.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),Q=(0,Z.i7)(i||(i=(0,H.A)(["\n  0%, 100% { \n    transform: scale(1); \n    opacity: 1; \n  }\n  50% { \n    transform: scale(1.05); \n    opacity: 0.9; \n  }\n"]))),T=Z.Ay.div(a||(a=(0,H.A)(["\n  min-height: 100vh;\n  background: #FAFAFC;\n  font-family: 'Pretendard', 'Noto Sans KR', 'Apple SD Gothic Neo', Arial, sans-serif;\n  color: #222;\n"]))),U=Z.Ay.div(r||(r=(0,H.A)(["\n  position: sticky;\n  top: 0;\n  background: white;\n  padding: 16px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  z-index: 100;\n"]))),V=Z.Ay.div(d||(d=(0,H.A)(["\n  max-width: 1400px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 12px;\n"]))),W=Z.Ay.div(s||(s=(0,H.A)(["\n  display: flex;\n  gap: 8px;\n"]))),X=Z.Ay.button(l||(l=(0,H.A)(["\n  background: #3182F6;\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &:hover {\n    background: #2B6CB0;\n  }\n"]))),$=Z.Ay.button(c||(c=(0,H.A)(["\n  background: #10B981;\n  color: white;\n  border: none;\n  padding: 10px 16px;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  &:hover {\n    background: #059669;\n  }\n"]))),nn=Z.Ay.h1(x||(x=(0,H.A)(["\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0;\n  color: #222;\n"]))),en=Z.Ay.div(p||(p=(0,H.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),tn=Z.Ay.button(g||(g=(0,H.A)(["\n  background: rgba(49, 130, 246, 0.1);\n  color: #3182F6;\n  border: 1px solid rgba(49, 130, 246, 0.2);\n  padding: 8px 12px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #3182F6;\n    color: white;\n  }\n"]))),on=Z.Ay.div(h||(h=(0,H.A)(["\n  font-size: 16px;\n  font-weight: 700;\n  color: #222;\n  min-width: 120px;\n  text-align: center;\n"]))),an=Z.Ay.div(u||(u=(0,H.A)(["\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 16px;\n  overflow-x: auto;\n"]))),rn=Z.Ay.div(b||(b=(0,H.A)(["\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  animation: "," 0.6s ease-out;\n  display: flex;\n"])),O),dn=Z.Ay.div(f||(f=(0,H.A)(["\n  min-width: 140px;\n  background: #F8FAFC;\n  flex-shrink: 0;\n"]))),sn=Z.Ay.div(y||(y=(0,H.A)(["\n  padding: 12px 8px;\n  font-size: 13px;\n  font-weight: 700;\n  text-align: center;\n  background: #3182F6;\n  color: white;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  height: 46px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ln=Z.Ay.div(m||(m=(0,H.A)(["\n  padding: 8px 6px;\n  font-size: 12px;\n  font-weight: 600;\n  text-align: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  background: #F8FAFC;\n  color: #374151;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  \n  &:nth-child(even) {\n    background: #FAFAFA;\n  }\n"]))),cn=Z.Ay.div(A||(A=(0,H.A)(["\n  flex: 1;\n  overflow-x: auto;\n"]))),xn=Z.Ay.div(v||(v=(0,H.A)(["\n  display: flex;\n  background: #F8FAFC;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n"]))),pn=Z.Ay.div(w||(w=(0,H.A)(["\n  width: 40px;\n  min-width: 40px;\n  max-width: 40px;\n  height: 46px;\n  padding: 8px 4px;\n  text-align: center;\n  font-weight: 600;\n  font-size: 12px;\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  background: #F8FAFC;\n  color: #4B5563;\n  \n  &.saturday {\n    background: #FEF3C7;\n    color: #D97706;\n  }\n  \n  &.sunday {\n    background: #FEE2E2;\n    color: #DC2626;\n  }\n"]))),gn=Z.Ay.div(k||(k=(0,H.A)(["\n  display: flex;\n  flex-direction: column;\n"]))),hn=Z.Ay.div(j||(j=(0,H.A)(["\n  display: flex;\n  height: 50px;\n  \n  &:nth-child(even) {\n    background: #FAFAFA;\n  }\n"]))),un=Z.Ay.div(F||(F=(0,H.A)(["\n  width: 40px;\n  min-width: 40px;\n  max-width: 40px;\n  height: 50px;\n  position: relative;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: center;\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  background: white;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  box-sizing: border-box;\n  \n  &:hover {\n    background: rgba(59, 130, 246, 0.08);\n  }\n  \n  &.saturday {\n    background: #FFFBEB;\n    \n    &:hover {\n      background: rgba(217, 119, 6, 0.08);\n    }\n  }\n  \n  &.sunday {\n    background: #FEF2F2;\n    \n    &:hover {\n      background: rgba(220, 38, 38, 0.08);\n    }\n  }\n"]))),bn=Z.Ay.div(D||(D=(0,H.A)(["\n  margin-bottom: 32px;\n  animation: "," 0.6s ease-out;\n"])),O),fn=(Z.Ay.h2(C||(C=(0,H.A)(["\n  font-size: 18px;\n  font-weight: 700;\n  color: #222;\n  margin-bottom: 12px;\n  padding: 12px 16px;\n  background: linear-gradient(135deg, #3182F6 0%, #1D4ED8 100%);\n  color: white;\n  border-radius: 12px 12px 0 0;\n  text-align: center;\n"]))),Z.Ay.div(z||(z=(0,H.A)(["\n  font-size: 14px;\n  animation: "," 2s infinite;\n  cursor: pointer;\n  display: inline-block;\n  margin: 1px;\n  line-height: 1;\n  \n  &:hover {\n    transform: scale(1.1);\n    transition: transform 0.2s ease;\n  }\n"])),Q)),yn=Z.Ay.div(E||(E=(0,H.A)(["\n  display: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(5px);\n  z-index: 1000;\n  align-items: center;\n  justify-content: center;\n  padding: 16px;\n"])),(n=>n.show?"flex":"none")),mn=Z.Ay.div(B||(B=(0,H.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 400px;\n  animation: "," 0.3s ease-out;\n"])),O),An=Z.Ay.div(S||(S=(0,H.A)(["\n  color: #222;\n  font-size: 18px;\n  font-weight: 700;\n  margin-bottom: 16px;\n  text-align: center;\n"]))),vn=Z.Ay.div(M||(M=(0,H.A)(["\n  margin-bottom: 20px;\n  text-align: center;\n  color: #666;\n  line-height: 1.6;\n"]))),wn=(Z.Ay.div(N||(N=(0,H.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 8px;\n  margin-bottom: 16px;\n"]))),Z.Ay.button(Y||(Y=(0,H.A)(["\n  padding: 12px 8px;\n  border: none;\n  border-radius: 8px;\n  background: #3182F6;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: 600;\n  transition: all 0.2s ease;\n  min-height: 76px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n\n  &:hover {\n    background: #2B6CB0;\n  }\n\n  &.etc {\n    background: #F59E0B;\n    \n    &:hover {\n      background: #D97706;\n    }\n  }\n"]))),Z.Ay.input(_||(_=(0,H.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid rgba(59, 130, 246, 0.2);\n  border-radius: 8px;\n  font-size: 16px;\n  outline: none;\n  transition: all 0.2s ease;\n  margin-bottom: 16px;\n  box-sizing: border-box;\n\n  &:focus {\n    border-color: #3B82F6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  &::placeholder {\n    color: #A0AEC0;\n  }\n"]))),Z.Ay.div(G||(G=(0,H.A)(["\n  display: flex;\n  gap: 12px;\n"])))),kn=Z.Ay.button(P||(P=(0,H.A)(["\n  flex: 1;\n  padding: 12px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 600;\n  transition: all 0.2s ease;\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  \n  &.cancel {\n    background: #E5E7EB;\n    color: #6B7280;\n    \n    &:hover:not(:disabled) {\n      background: #D1D5DB;\n    }\n  }\n  \n  &.delete {\n    background: #EF4444;\n    color: white;\n    \n    &:hover:not(:disabled) {\n      background: #DC2626;\n    }\n  }\n  \n  &:not(.cancel):not(.delete) {\n    &:hover:not(:disabled) {\n      background: #2B6CB0;\n    }\n  }\n"]))),jn=["\uc784\ub3d9\ud558","\uc7a5\uc9c0\ubbfc","\ud669\ud76c","\uae40\uc885\uc9c4","\ubc29\uc2dc\uc628","\uc815\uc608\ub2f4","\ubc29\uc628\uc720","\uc815\uc608\uc900"],Fn=[{name:"\ucd9c\uc11d",value:3,icon:"\u2705"},{name:"\uc624\ud6c4\ucd9c\uc11d",value:3,icon:"\ud83c\udf05"},{name:"\ubb38\ud654\uad50\uc2e4",value:3,icon:"\ud83c\udfa8"},{name:"\ub9d0\uc500\uc554\uc1a1",value:1,icon:"\ud83d\udcd6"},{name:"\uc131\uacbd\uc77d\uae30",value:1,icon:"\ud83d\udcda"},{name:"\uae30\ub3c4\ubb38\uae30\ub3c4",value:5,icon:"\ud83d\ude4f"},{name:"\uc190\uac00\ub77d\uae30\ub3c4",value:10,icon:"\ud83d\udc4b"}],Dn=()=>{const n=(0,R.Zp)(),[e,t]=(0,K.useState)(new Date),[o,i]=(0,K.useState)([]),[a,r]=(0,K.useState)({}),[d,s]=(0,K.useState)(!0),[l,c]=(0,K.useState)(!1),[x,p]=(0,K.useState)(null),[g,h]=(0,K.useState)(""),[u,b]=(0,K.useState)(!1),f=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();(0,K.useEffect)((()=>{y()}),[]),(0,K.useEffect)((()=>{o.length>0&&m()}),[o,e]);const y=async()=>{try{i(jn)}catch(n){console.error("\ud559\uc0dd \ubaa9\ub85d \ub85c\ub4dc \uc2e4\ud328:",n)}},m=async()=>{try{s(!0);const n=new Date(e.getFullYear(),e.getMonth(),1),t=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59),o=(0,I.P)((0,I.rJ)(q.db,"talant_history"),(0,I._M)("receivedDate",">=",I.Dc.fromDate(n)),(0,I._M)("receivedDate","<=",I.Dc.fromDate(t))),i=await(0,I.GG)(o),a={};i.forEach((n=>{const e=n.data(),t=e.receivedDate.toDate().getDate(),o="".concat(e.name,"-").concat(t,"-").concat(e.reason);a[o]||(a[o]=[]),a[o].push((0,J.A)((0,J.A)({id:n.id},e),{},{day:t}))})),r(a)}catch(n){console.error("\ub2ec\ub780\ud2b8 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",n)}finally{s(!1)}},A=n=>{const o=new Date(e);o.setMonth(o.getMonth()+n),t(o)},v=n=>{const t=new Date(e.getFullYear(),e.getMonth(),n).getDay();return 0===t?"sunday":6===t?"saturday":null},w=()=>Array.from({length:f},((n,e)=>e+1));return(0,L.jsxs)(T,{children:[(0,L.jsx)(U,{children:(0,L.jsxs)(V,{children:[(0,L.jsxs)(W,{children:[(0,L.jsx)(X,{onClick:()=>n("/talant"),children:"\u2190 \ub4a4\ub85c"}),(0,L.jsx)($,{onClick:()=>n("/talant/history"),children:"\ud83d\udcca \ub0b4\uc5ed"})]}),(0,L.jsx)(nn,{children:"\ub2ec\ub780\ud2b8 \ud604\ud669\ud310"}),(0,L.jsxs)(en,{children:[(0,L.jsx)(tn,{onClick:()=>A(-1),children:"\u2190"}),(0,L.jsxs)(on,{children:[e.getFullYear(),"\ub144 ",["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"][e.getMonth()]]}),(0,L.jsx)(tn,{onClick:()=>A(1),children:"\u2192"})]})]})}),(0,L.jsx)(an,{children:d?(0,L.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"\ub85c\ub529 \uc911..."}):(0,L.jsx)("div",{children:o.map((n=>(0,L.jsx)(bn,{children:(0,L.jsxs)(rn,{children:[(0,L.jsxs)(dn,{children:[(0,L.jsx)(sn,{children:n}),Fn.map((n=>(0,L.jsxs)(ln,{children:[n.icon," ",n.name]},n.name)))]}),(0,L.jsxs)(cn,{children:[(0,L.jsx)(xn,{children:w().map((n=>{const e=v(n);return(0,L.jsx)(pn,{className:e||"",title:"".concat(n,"\uc77c"),children:n},n)}))}),(0,L.jsx)(gn,{children:Fn.map((e=>(0,L.jsx)(hn,{children:w().map((t=>{const o="".concat(n,"-").concat(t,"-").concat(e.name),i=a[o],r=v(t);return(0,L.jsx)(un,{className:r||"",onClick:()=>((n,e,t)=>{if(u)return;const o="".concat(n,"-").concat(e,"-").concat(t),i=a[o];p({studentName:n,day:e,reason:t,existingData:i}),c(!0),h("")})(n,t,e.name),children:i&&i.map(((n,e)=>{const t=Fn.find((e=>e.name===n.reason));return(0,L.jsx)(fn,{children:(null===t||void 0===t?void 0:t.icon)||"\u2b50"},e)}))},t)}))},e.name)))})]})]})},n)))})}),(0,L.jsx)(yn,{show:l,onClick:()=>c(!1),children:(0,L.jsxs)(mn,{onClick:n=>n.stopPropagation(),children:[(0,L.jsxs)(An,{children:[null===x||void 0===x?void 0:x.studentName," - ",e.getMonth()+1,"\uc6d4 ",null===x||void 0===x?void 0:x.day,"\uc77c",(0,L.jsx)("br",{}),(0,L.jsx)("span",{style:{fontSize:"14px",color:"#666"},children:null===x||void 0===x?void 0:x.reason})]}),null!==x&&void 0!==x&&x.existingData&&x.existingData.length>0?(0,L.jsxs)("div",{children:[(0,L.jsx)(vn,{children:"\uc774\ubbf8 \ub4f1\ub85d\ub41c \ub2ec\ub780\ud2b8\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),(0,L.jsxs)(wn,{children:[(0,L.jsx)(kn,{className:"delete",onClick:()=>(async n=>{if(!u)try{b(!0),await(0,I.kd)((0,I.H9)(q.db,"talant_history",n)),c(!1),await m()}catch(e){console.error("\ub2ec\ub780\ud2b8 \uc0ad\uc81c \uc2e4\ud328:",e),alert("\ub2ec\ub780\ud2b8 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{b(!1)}})(x.existingData[0].id),disabled:u,children:u?"\uc0ad\uc81c \uc911...":"\uc0ad\uc81c"}),(0,L.jsx)(kn,{className:"cancel",onClick:()=>c(!1),disabled:u,children:"\ucde8\uc18c"})]})]}):(0,L.jsxs)("div",{children:[(0,L.jsx)(vn,{children:"\uc774 \uc0ac\uc720\ub85c \ub2ec\ub780\ud2b8\ub97c \ucd94\uac00\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,L.jsxs)(wn,{children:[(0,L.jsx)(kn,{className:"cancel",onClick:()=>c(!1),disabled:u,children:"\ucde8\uc18c"}),(0,L.jsx)(kn,{style:{background:"#3182F6",color:"white"},onClick:async()=>{if(x&&!u)try{b(!0);const{studentName:n,day:t,reason:o}=x,i=new Date(e.getFullYear(),e.getMonth(),t),a=Fn.find((n=>n.name===o));await(0,I.gS)((0,I.rJ)(q.db,"talant_history"),{name:n,reason:o,talant:((null===a||void 0===a?void 0:a.value)||1).toString(),receivedDate:I.Dc.fromDate(i),createdAt:I.Dc.now()}),c(!1),await m()}catch(n){console.error("\ub2ec\ub780\ud2b8 \ucd94\uac00 \uc2e4\ud328:",n),alert("\ub2ec\ub780\ud2b8 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{b(!1)}},disabled:u,children:u?"\ucd94\uac00 \uc911...":"\ucd94\uac00"})]})]})]})})]})}}}]);